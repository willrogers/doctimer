{"version":3,"sources":["webpack:///./src/model.ts","webpack:///./src/components/buttons.jsx","webpack:///./src/components/status.tsx","webpack:///./src/components/controls.jsx","webpack:///./src/components/stats.jsx","webpack:///./src/pages/doctimer.tsx","webpack:///./node_modules/core-js/modules/es7.string.pad-start.js","webpack:///./node_modules/core-js/modules/_string-pad.js","webpack:///./node_modules/core-js/modules/_string-repeat.js"],"names":["CATEGORIES","zeroPad","num","places","String","padStart","timeString","millis","secs","Math","floor","round","fullTimeString","date","toLocaleTimeString","Segment","category","this","comment","startMillis","Date","now","endDuration","setComment","stop","console","log","startTime","endTime","currentDuration","Day","segments","addSegment","segment","push","length","Timer","props","running","child","time","style","width","className","classes","button","timer","StartButton","bgcolor","selected","text","backgroundColor","type","onClick","callback","name","TimerButton","disabled","undefined","altname","SwitchButton","toControls","switch","setControlsView","Status","id","status","toLocaleDateString","weekday","day","month","year","hour","minute","second","events","ControlsView","currentSegment","setCurrentSegment","started","setStarted","useState","setTime","itemPressed","newSegment","useEffect","window","setInterval","clearInterval","buttonsSelected","categories","map","deets","key","SegmentSummary","StatsView","statsView","statsContainer","statsColumn","DoctimerPage","controlsView","$export","$pad","userAgent","WEBKIT_BUG","test","P","F","maxLength","arguments","toLength","repeat","defined","module","exports","that","fillString","left","S","stringLength","fillStr","intMaxLength","fillLen","stringFiller","call","ceil","slice","toInteger","count","str","res","n","Infinity","RangeError"],"mappings":"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","file":"component---src-pages-doctimer-tsx-987a3f8c7183641b7d3f.js","sourcesContent":["export const APPT = \"Appointment\"\nexport const NOTES = \"Notes\"\nexport const VISIT = \"Home Visit\"\nexport const MEETING = \"Meeting\"\nexport const CHECKS = \"Checks\"\nexport const IN_BETWEEN = \"In between\"\nexport const CATEGORIES = [APPT, NOTES, VISIT, MEETING, CHECKS]\n\nfunction zeroPad(num: number, places: number): string {\n  return String(num).padStart(places, \"0\")\n}\n\nexport function timeString(millis: number): string {\n  const secs = millis / 1000\n  const minutes = zeroPad(Math.floor(secs / 60), 2)\n  const seconds = zeroPad(Math.round(secs % 60), 2)\n  return `${minutes}:${seconds}`\n}\n\nexport function fullTimeString(date: Date): string {\n  return date.toLocaleTimeString()\n}\n\nexport function fullDateString(date: Date): string {\n  const options = {\n    weekday: \"long\",\n    day: \"numeric\",\n    month: \"long\",\n    year: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n  }\n  return date.toLocaleDateString(undefined, options)\n}\n\nexport class Segment {\n  public category: string\n  public comment: string\n  public startMillis: number\n  public endDuration: number\n  constructor(category: string) {\n    this.category = category\n    this.comment = null\n    this.startMillis = Date.now()\n    this.endDuration = null\n  }\n  setComment(comment: string): void {\n    this.comment = comment\n  }\n  stop(): void {\n    this.endDuration = Date.now() - this.startMillis\n    console.log(`stopped segment ${this.endDuration}`)\n  }\n  startTime(): Date {\n    return new Date(this.startMillis)\n  }\n  endTime(): Date {\n    if (this.endDuration) {\n      return new Date(this.startMillis + this.endDuration)\n    } else {\n      return new Date()\n    }\n  }\n  currentDuration(): number {\n    if (this.endDuration !== null) {\n      return this.endDuration\n    } else {\n      return Date.now() - this.startMillis\n    }\n  }\n}\n\nexport class Day {\n  public date: Date\n  public segments: Segment[]\n  constructor() {\n    this.date = new Date()\n    this.segments = []\n  }\n\n  addSegment(segment: Segment): void {\n    this.segments.push(segment)\n    console.log(`${this.segments.length} segments`)\n  }\n}\n","import React from \"react\"\nimport { timeString } from \"../model\"\nimport classes from \"./buttons.module.css\"\n\nexport const Timer = props => {\n  const { running, segment } = props\n  let child = <div>Press 'Start' to begin</div>\n  if (running) {\n    if (segment !== null) {\n      const time = timeString(segment.currentDuration())\n      child = (\n        <>\n          <div style={{ width: \"50%\" }}>{segment.category}</div>\n          <div style={{ width: \"50%\" }}> {time} </div>\n        </>\n      )\n    } else {\n      child = <div>Select a category</div>\n    }\n  }\n  return <div className={`${classes.button} ${classes.timer}`}>{child}</div>\n}\n\nexport const StartButton = props => {\n  function clicked() {\n    if (props.callback) {\n      props.callback(props.name)\n    }\n  }\n  const bgcolor = props.selected ? \"red\" : \"green\"\n  const text = props.selected ? \"Stop\" : \"Start\"\n  return (\n    <button\n      className={classes.button}\n      style={{ backgroundColor: bgcolor }}\n      type=\"button\"\n      onClick={clicked}\n    >\n      {text}\n    </button>\n  )\n}\n\nexport const TimerButton = props => {\n  function clicked() {\n    if (props.callback) {\n      props.callback(props.name)\n    }\n  }\n  const bgcolor = props.selected && !props.disabled ? \"red\" : \"gray\"\n  const text =\n    props.altname !== undefined && props.selected ? props.altname : props.name\n  return (\n    <button\n      className={classes.button}\n      disabled={props.disabled}\n      style={{ backgroundColor: bgcolor }}\n      type=\"button\"\n      onClick={clicked}\n    >\n      {text}\n    </button>\n  )\n}\n\nexport const SwitchButton = props => {\n  let text = \"\"\n  if (props.toControls) {\n    text = \"Back to controls\"\n  } else {\n    text = \"See stats\"\n  }\n  function doSwitch() {\n    if (props.toControls) {\n      props.setControlsView(true)\n    } else {\n      props.setControlsView(false)\n    }\n  }\n  return (\n    <button\n      className={`${classes.button} ${classes.switch}`}\n      onClick={doSwitch}\n    >\n      {text}\n    </button>\n  )\n}\n","import React from \"react\"\nimport { fullDateString } from \"../model\"\nimport classes from \"./status.module.css\"\n\ninterface StatusProps {\n  time: Date\n  events: number\n}\n\nexport const Status = (props: StatusProps): JSX.Element => {\n  return (\n    <div id=\"status\" className={classes.status}>\n      <div className={classes.date}>{fullDateString(props.time)}</div>\n      <div className={classes.events}>{props.events} events so far.</div>\n    </div>\n  )\n}\n","import React, { useState } from \"react\"\nimport \"./controls.css\"\nimport {\n  StartButton,\n  Timer,\n  TimerButton,\n  SwitchButton,\n} from \"../components/buttons\"\nimport { Status } from \"./status\"\nimport { Segment } from \"../model\"\nimport { useEffect } from \"react\"\n\nexport const ControlsView = props => {\n  const { currentSegment, setCurrentSegment, started, setStarted } = props\n  const [time, setTime] = useState(new Date())\n  useEffect(() => {\n    const timer = window.setInterval(() => {\n      setTime(new Date())\n    }, 1000)\n    return () => {\n      clearInterval(timer)\n    }\n  })\n  function startPressed() {\n    setStarted(!started)\n    if (started && currentSegment) {\n      currentSegment.stop()\n      props.day.addSegment(currentSegment)\n    }\n  }\n  function itemPressed(category) {\n    if (currentSegment === null) {\n      // Start segment\n      const newSegment = new Segment(category)\n      setCurrentSegment(newSegment)\n    } else if (currentSegment.category === category) {\n      // Stop segment\n      currentSegment.stop()\n      props.day.addSegment(currentSegment)\n      setCurrentSegment(null)\n    } else {\n      currentSegment.stop()\n      props.day.addSegment(currentSegment)\n      const newSegment = new Segment(category)\n      setCurrentSegment(newSegment)\n    }\n  }\n  const buttonsSelected = props.categories.map(category => [\n    category,\n    currentSegment && category === currentSegment.category,\n  ])\n  return (\n    <div id=\"buttonScreen\">\n      <Status time={time} events={props.day.segments.length} />\n      <Timer running={started} segment={currentSegment} />\n      {buttonsSelected.map(deets => (\n        <TimerButton\n          key={deets[0]}\n          name={deets[0]}\n          selected={deets[1]}\n          callback={itemPressed}\n          disabled={!started}\n        ></TimerButton>\n      ))}\n      <StartButton callback={startPressed} selected={started}></StartButton>\n      <SwitchButton\n        toControls={false}\n        setControlsView={props.setControlsView}\n      />\n    </div>\n  )\n}\n","import React from \"react\"\nimport classes from \"./stats.module.css\"\nimport { SwitchButton } from \"./buttons\"\nimport { fullTimeString, timeString } from \"../model\"\n\nexport const SegmentSummary = props => {\n  const { segment } = props\n  console.log(segment.endTime())\n  return (\n    <div>\n      {segment.category} start {fullTimeString(segment.startTime())} end{\" \"}\n      {fullTimeString(segment.endTime())} duration{\" \"}\n      {timeString(segment.currentDuration())}\n    </div>\n  )\n}\nexport const StatsView = props => {\n  return (\n    <div className={classes.statsView}>\n      <p>Stats for {props.day.date.toLocaleDateString()}:</p>\n      <p>There have been {props.day.segments.length} completed segments.</p>\n      {props.day.segments.map(segment => (\n        <SegmentSummary segment={segment} />\n      ))}\n      <div className={classes.statsContainer}>\n        <div className={classes.statsColumn}></div>\n        <div className={classes.statsColumn}></div>\n      </div>\n      <SwitchButton\n        toControls={true}\n        setControlsView={props.setControlsView}\n      ></SwitchButton>\n    </div>\n  )\n}\n","import React, { useState } from \"react\"\n\nimport { ControlsView } from \"../components/controls\"\nimport { StatsView } from \"../components/stats\"\nimport { Day, CATEGORIES, Segment } from \"../model\"\n\nconst DoctimerPage = (): JSX.Element => {\n  const [day, setDay] = useState<Day>(new Day())\n  const [controlsView, setControlsView] = useState<boolean>(true)\n  const [currentSegment, setCurrentSegment] = useState<Segment>(null)\n  const [started, setStarted] = useState<boolean>(null)\n\n  if (controlsView) {\n    return (\n      <ControlsView\n        setControlsView={setControlsView}\n        day={day}\n        categories={CATEGORIES}\n        currentSegment={currentSegment}\n        setCurrentSegment={setCurrentSegment}\n        started={started}\n        setStarted={setStarted}\n      />\n    )\n  } else {\n    return <StatsView day={day} setControlsView={setControlsView} />\n  }\n}\n\nexport default DoctimerPage\n","'use strict';\n// https://github.com/tc39/proposal-string-pad-start-end\nvar $export = require('./_export');\nvar $pad = require('./_string-pad');\nvar userAgent = require('./_user-agent');\n\n// https://github.com/zloirock/core-js/issues/280\nvar WEBKIT_BUG = /Version\\/10\\.\\d+(\\.\\d+)?( Mobile\\/\\w+)? Safari\\//.test(userAgent);\n\n$export($export.P + $export.F * WEBKIT_BUG, 'String', {\n  padStart: function padStart(maxLength /* , fillString = ' ' */) {\n    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, true);\n  }\n});\n","// https://github.com/tc39/proposal-string-pad-start-end\nvar toLength = require('./_to-length');\nvar repeat = require('./_string-repeat');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, maxLength, fillString, left) {\n  var S = String(defined(that));\n  var stringLength = S.length;\n  var fillStr = fillString === undefined ? ' ' : String(fillString);\n  var intMaxLength = toLength(maxLength);\n  if (intMaxLength <= stringLength || fillStr == '') return S;\n  var fillLen = intMaxLength - stringLength;\n  var stringFiller = repeat.call(fillStr, Math.ceil(fillLen / fillStr.length));\n  if (stringFiller.length > fillLen) stringFiller = stringFiller.slice(0, fillLen);\n  return left ? stringFiller + S : S + stringFiller;\n};\n","'use strict';\nvar toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n\nmodule.exports = function repeat(count) {\n  var str = String(defined(this));\n  var res = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError(\"Count can't be negative\");\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;\n  return res;\n};\n"],"sourceRoot":""}